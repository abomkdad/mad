<!DOCTYPE html>
<html>
<head>
    <title>×“×£ ×”×–×× ×”</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { font-family: 'Arial', sans-serif; background-color: #1a1a1a; margin: 0; padding: 0; direction: rtl; text-align: right; color: #f0f0f0; }
        .container { margin: auto; padding: 30px; max-width: 100%; background-color: #2a2a2a; border-radius: 15px; box-shadow: 0 0 15px rgba(0, 0, 0, 0.5); }
        h1 { text-align: center; color: #d4af37; font-size: 2em; }
        .product { display: flex; flex-direction: column; align-items: center; margin-bottom: 20px; padding: 20px; background-color: #333; border: 1px solid #444; border-radius: 12px; }
        .product img { width: 100%; max-width: 200px; height: auto; object-fit: cover; border-radius: 12px; border: 1px solid #666; }
        .product-info { text-align: center; margin-top: 10px; }
        .order-btn { padding: 10px 15px; background-color: #d4af37; color: black; border: none; border-radius: 8px; cursor: pointer; }
        .order-btn:hover { background-color: #b38e22; }
    </style>
</head>
<body>
    <div class="container" id="order-content">
        <h1>ğŸ“¦ ×“×£ ×”×–×× ×” ×œ××•×¦×¨×™×</h1>
        <input type="text" id="searchBar" class="search-bar" placeholder="×—×¤×© ××•×¦×¨..." oninput="displayProducts()">
        <div id="product-list"></div>
        <div id="cart">
            <h2>ğŸ›’ ×¢×’×œ×ª ×§× ×™×•×ª</h2>
            <ul id="cart-items"></ul>
            <div id="total-without-tax">×¡×”"×› ×œ×œ× ××¢"×: 0 ILS</div>
            <div id="total-with-tax">×¡×”"×› ×›×•×œ×œ ××¢"×: 0 ILS</div>
            <button class="order-btn" onclick="sendToWhatsApp()">ğŸ“² ×©×œ×— ×œ×•×•×˜×¡××¤</button>
        </div>
        <button class="order-btn" onclick="openEditModal()" style="margin-top: 20px;">ğŸ”§ ×›× ×™×¡×” ×œ× ×™×”×•×œ ××•×¦×¨×™×</button>
    </div>

    <script>
        const TAX_RATE = 0.18;
        let cart = [];
        let products = [
            {
                "Title": "W183",
                "Description": "×‘×©××™ ×’×‘×¨×™× W183",
                "Price": 100,
                "Image Link": "https://madperfume.co.il/upload/05-2024/product/CREED1.jpg"
            },
            {
                "Title": "I101",
                "Description": "×‘×©××™ ×’×‘×¨×™× I101",
                "Price": 100,
                "Image Link": "https://madperfume.co.il/upload/09-2023/product/WhatsApp Image 2023-07-19 at 02.51.08.jpg"
            }
        ];

        function addToCart(index) {
            const quantity = parseInt(document.getElementById(`qty-${index}`).value);
            const product = products[index];
            const existing = cart.find(item => item.title === product.Title);
            if (existing) {
                existing.quantity += quantity;
            } else {
                cart.push({ title: product.Title, price: product.Price, quantity: quantity });
            }
            updateCart();
        }

        function updateCart() {
            const cartItems = document.getElementById('cart-items');
            cartItems.innerHTML = '';

            let total = 0;
            cart.forEach(item => {
                const itemTotal = item.price * item.quantity;
                total += itemTotal;
                const li = document.createElement('li');
                li.innerText = `${item.title} - ×›××•×ª: ${item.quantity} - ××—×™×¨: ${itemTotal} ILS`;
                cartItems.appendChild(li);
            });

            const totalWithTax = total * (1 + TAX_RATE);
            document.getElementById('total-without-tax').innerText = `×¡×”"×› ×œ×œ× ××¢"×: ${total.toFixed(2)} ILS`;
            document.getElementById('total-with-tax').innerText = `×¡×”"×› ×›×•×œ×œ ××¢"×: ${totalWithTax.toFixed(2)} ILS`;
        }

        function sendToWhatsApp() {
            if (cart.length === 0) {
                alert('×¢×’×œ×ª ×”×§× ×™×•×ª ×¨×™×§×”!');
                return;
            }

            let message = "×”×–×× ×” ×©×œ×™:\n";
            let total = 0;
            cart.forEach(item => {
                const itemTotal = item.price * item.quantity;
                total += itemTotal;
                message += `${item.title} - ×›××•×ª: ${item.quantity} - ××—×™×¨: ${itemTotal} ILS\n`;
            });

            const totalWithTax = total * (1 + TAX_RATE);
            message += `\n×¡×”"×› ×œ×œ× ××¢"×: ${total.toFixed(2)} ILS\n×¡×”"×› ×›×•×œ×œ ××¢"×: ${totalWithTax.toFixed(2)} ILS`;

            const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(message)}`;
            window.open(whatsappUrl, '_blank');
        }

        function displayProducts() {
            const productList = document.getElementById('product-list');
            productList.innerHTML = '';
            products.forEach((product, index) => {
                const productDiv = document.createElement('div');
                productDiv.className = 'product';
                productDiv.innerHTML = `
                    <img src="${product['Image Link']}" alt="${product.Title}">
                    <div class="product-info">
                        <strong>${product.Title}</strong><br>
                        ${product.Description}<br>
                        ××—×™×¨: ${product.Price} ILS<br>
                        <label>×›××•×ª: <input type="number" id="qty-${index}" value="1" min="1"></label>
                        <button class="order-btn" onclick="addToCart(${index})">â• ×”×•×¡×£ ×œ×¢×’×œ×”</button>
                    </div>
                `;
                productList.appendChild(productDiv);
            });
        }

        displayProducts();
    </script>
</body>
</html>
